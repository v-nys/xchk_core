{% extends 'base.html' %}
{% load static %}
{% block content %}

{% autoescape off %}
    {{ graph }}
{% endautoescape %}

{% if repo_id %}
<code>{{ clone_command }}</code>
<a href="{% url 'checkerapp:delete_repo_view' repo_id %}">Mijn repository voor deze cursus verwijderen.</a>
{% endif %}
 
{% endblock %}

{% block javascript %}
{{ block.super }}
{{ supplied_dependencies|json_script:"supplied_dependencies" }}
<script>
dependencies = JSON.parse(document.getElementById('supplied_dependencies').textContent);
markWithDependencies = function(title) {
  var node = $(".node").filter(function() { return $(this).find('title').text() === title });
  node.addClass("dependency");
  var node_dependencies = dependencies[title];
  if (node_dependencies) {
    for (dep in node_dependencies) {
      markWithDependencies(node_dependencies[dep]);
    }
  }
}
$(window).on('load', function() {
  $(".node").hover(
    function(e) {
      markWithDependencies($(this).find('title').html());
    },
    function(e) {
      $("*").removeClass("dependency")
  });
}); 
</script>
{% endblock %}
